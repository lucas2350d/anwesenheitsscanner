(s=>{function t(e,t){if(void 0!==e){if(!n(this.DATA_TYPE,e))throw new TypeError("Unsupported dataType")}else e=this.DATA_TYPE.DEFAULT;try{Object.defineProperty(this,"dataType",{configurable:!1,writeable:!0,get:function(){return e},set:function(t){if(!n(this.DATA_TYPE,t))throw new TypeError("Unsupported dataType");e=t}})}catch(t){this.dataType=e}this.data="object"==typeof t?function t(e){if("object"!=typeof e)return e;var r={};for(var a in e)e.hasOwnProperty(a)&&("object"==typeof e[a]?r[a]=t(e[a]):r[a]=e[a]);return r}(t):t}function r(e,r,a){if("object"==typeof e&&void 0===r&&void 0===a&&(a=e.errorCorrection,r=e.version,e=e.encodeMode),void 0!==e){if(!n(this.ENCODE_MODE,e))throw new TypeError("Unsupported encodeMode")}else e=this.ENCODE_MODE.UTF8;try{Object.defineProperty(this,"encodeMode",{configurable:!1,writeable:!0,get:function(){return e},set:function(t){if(!n(this.ENCODE_MODE,t))throw new TypeError("Unsupported encodeMode");e=t}})}catch(t){this.encodeMode=e}if(void 0!==r){if("number"!=typeof r)throw new TypeError("Invalid version type");if(r<-40||40<r)throw new RangeError("Invalid version value")}else r=this.DEFAULT;try{Object.defineProperty(this,"version",{configurable:!1,writeable:!0,get:function(){return r},set:function(t){if("number"!=typeof t)throw new TypeError("Invalid version type");if(t<-40||40<t)throw new RangeError("Invalid version value");r=t}})}catch(t){this.version=r}if(void 0!==a){if(!n(this.ERROR_CORRECTION,a))throw new TypeError("Invalid errorCorrection")}else a=this.ERROR_CORRECTION.M;try{Object.defineProperty(this,"errorCorrection",{configurable:!1,writeable:!0,get:function(){return a},set:function(t){if(!n(this.ERROR_CORRECTION,t))throw new TypeError("Invalid errorCorrection");a=t}})}catch(t){this.errorCorrection=a}}t.prototype.DATA_TYPE={DEFAULT:0,TEXT:0,URL:1,BOOKMARK:2,CALL:3,SMS:4,EMAIL:5,VCARD:6,MECARD:7,VEVENT:8,GOOGLE_MAPS:9,BING_MAPS:10,GEO:11,ITUNES:12,ITUNES_REVIEW:13,ANDROID_MARKET:14,FACEBOOK_USER_PROFILE:15,FOURSQUARE:16,TWEET_FETCH:17,TWEET:18,BLACKBERRY_MESSENGER_USER:19,ANDROID_WIFI:20,WIKIPEDIA:21,YOUTUBE_USER:22,YOUTUBE_VIDEO:23,BITCOIN:24,SEPA_CREDIT_TRANSFER:25},t.prototype.toString=function(){var t,e,r,n=this;switch(this.dataType){case this.DATA_TYPE.DEFAULT:case this.DATA_TYPE.TEXT:return s("data","string","number","object"),"object"==typeof this.data?(s("data.text","string","number"),d("data.text"),o("text")):(d("data"),o());case this.DATA_TYPE.URL:return s("data","string","object"),"object"==typeof this.data?(s("data.url","string"),d("data.url"),(/^[a-zA-Z]+:\/\//.test(o("url"))?"":"http://")+o("url")):(d("data"),(/^[a-zA-Z]+:\/\//.test(o())?"":"http://")+o());case this.DATA_TYPE.BOOKMARK:return s("data","object"),s("data.title","string","number"),s("data.url","string"),d("data.title","data.url"),"MEBKM:TITLE:"+o("title")+";URL:"+(/^[a-zA-Z]+:\/\//.test(o("url"))?"":"http://")+o("url");case this.DATA_TYPE.CALL:return s("data","string","number","object"),"object"==typeof this.data?(s("data.phoneNumber","string","number"),d("data.phoneNumber"),"TEL:"+o("phoneNumber")):(d("data"),"TEL:"+o());case this.DATA_TYPE.SMS:return s("data","object"),s("data.phoneNumber","string","number"),s("data.message","string","number"),d("data.phoneNumber"),"SMSTO:"+o("phoneNumber")+":"+o("message");case this.DATA_TYPE.EMAIL:return s("data","object"),s("data.recipient","string"),s("data.subject","string"),s("data.body","string"),d("data.recipient"),"SMTP:"+o("recipient").replace(":","")+":"+o("subject").replace(/:/g,"\\:")+":"+o("body");case this.DATA_TYPE.VCARD:switch(s("data","object"),s("data.version","string","number"),s("data.type","string"),s("data.firstName","string"),s("data.middleName","string"),s("data.lastName","string"),s("data.organization","string"),s("data.title","string","number"),s("data.mobilePhone","string","number"),s("data.work","object"),s("data.work.street","string"),s("data.work.city","string"),s("data.work.zip","string","number"),s("data.work.state","string"),s("data.work.country","string"),s("data.work.phone","string","number"),s("data.work.fax","string","number"),s("data.work.eMail","string"),s("data.work.url","string"),s("data.home","object"),s("data.home.street","string"),s("data.home.city","string"),s("data.home.zip","string","number"),s("data.home.state","string"),s("data.home.country","string"),s("data.home.phone","string","number"),s("data.home.eMail","string"),s("data.home.url","string"),s("data.birthday",Date,null),d("data.version","data.type"),r={"\\":"\\\\",";":"\\;",",":"\\,","\n":"\\n"},t=[],parseFloat(o("version"))){case 2.1:t[0]="2.1";break;case 3:t[0]="3.0";break;default:throw new Error("Unsupported VCARD.version ("+o("version")+")")}switch(o("type").toLowerCase()){case"person":t[1]=(0<o("firstName").length||0<o("middleName").length||0<o("lastName").length?"FN:"+(i(o("firstName"),r)+" "+i(o("middleName"),r)+" "+i(o("lastName"),r)).replace(/\s{2,}/g," ").replace(/^\s+|\s+$/g,"")+"\n":"")+(0<o("organization").length?"ORG:"+i(o("organization"),r)+"\n":"");break;case"company":t[1]=(0<o("organization").length?"ORG:"+i(o("organization"),r)+"\n":"")+(0<o("organization").length?"FN:"+i(o("organization"),r)+"\n":"")+"X-ABShowAs:COMPANY\n";break;default:throw new Error("Unsupported VCARD.type ("+o("type")+")")}return"BEGIN:VCARD\nVERSION:"+t[0]+"\n"+(0<o("lastName").length||0<o("firstName").length||0<o("middleName").length?"N:"+i(o("lastName"),r)+";"+i(o("firstName"),r)+";"+i(o("middleName"),r)+";;\n":"")+t[1]+(0<o("title").length?"TITLE:"+i(o("title"),r)+"\n":"")+(a("work")&&0<o("work.eMail").length?"EMAIL;"+("3.0"===t[0]?"type=INTERNET;type=":"INTERNET;")+"WORK:"+i(o("work.eMail"),r)+"\n":"")+(a("home")&&0<o("home.eMail").length?"EMAIL;"+("3.0"===t[0]?"type=INTERNET;type=":"INTERNET;")+"HOME:"+i(o("home.eMail"),r)+"\n":"")+(0<o("mobilePhone").length?"TEL;"+("3.0"===t[0]?"type=":"")+"CELL:"+i(o("mobilePhone"),r)+"\n":"")+(a("work")&&0<o("work.phone").length?"TEL;"+("3.0"===t[0]?"type=":"")+"WORK:"+i(o("work.phone"),r)+"\n":"")+(a("home")&&0<o("home.phone").length?"TEL;"+("3.0"===t[0]?"type=":"")+"HOME:"+i(o("home.phone"),r)+"\n":"")+(a("work")&&0<o("work.fax").length?"TEL;"+("3.0"===t[0]?"type=WORK,":"WORK;")+"FAX:"+i(o("work.fax"),r)+"\n":"")+(a("work")&&(0<o("work.street").length||0<o("work.city").length||0<o("work.state").length||0<o("work.zip").length||0<o("work.country").length)?"ADR;"+("3.0"===t[0]?"type=":"")+"WORK:;;"+i(o("work.street"),r)+";"+i(o("work.city"),r)+";"+i(o("work.state"),r)+";"+i(o("work.zip"),r)+";"+i(o("work.country"),r)+"\n":"")+(a("home")&&(0<o("home.street").length||0<o("home.city").length||0<o("home.state").length||0<o("home.zip").length||0<o("home.country").length)?"ADR;"+("3.0"===t[0]?"type=":"")+"HOME:;;"+i(o("home.street"),r)+";"+i(o("home.city"),r)+";"+i(o("home.state"),r)+";"+i(o("home.zip"),r)+";"+i(o("home.country"),r)+"\n":"")+(a("birthday")&&null!==a("birthday")?"BDAY;value=date:"+a("birthday").getFullYear()+("0"+(a("birthday").getMonth()+1)).substr(-2)+("0"+a("birthday").getDate()).substr(-2)+";":"")+(a("work")&&0<o("work.url").length?"URL;"+("3.0"===t[0]?"type=":"")+"WORK:"+i(o("work.url"),r)+"\n":"")+(a("home")&&0<o("home.url").length?"URL;"+("3.0"===t[0]?"type=":"")+"HOME:"+i(o("home.url"),r)+"\n":"")+"END:VCARD";case this.DATA_TYPE.MECARD:return s("data","object"),s("data.firstName","string"),s("data.lastName","string"),s("data.eMail","string"),s("data.phoneNumber","string","number"),s("data.videoCall","string","number"),s("data.birthday",Date,null),s("data.poBox","string","number"),s("data.room","string","number"),s("data.street","string"),s("data.city","string"),s("data.state","string"),s("data.zip","string","number"),s("data.country","string"),s("data.url","string"),s("data.memo","string","number"),r={"\\":"\\\\",":":"\\:",";":"\\;",",":"\\,"},"MECARD:"+(0<o("lastName").length||0<o("firstName")?"N:"+i(o("lastName"),r)+(0<o("firstName").length?","+i(o("firstName"),r):"")+";":"")+(0<o("phoneNumber").length?"TEL:"+i(o("phoneNumber"),r)+";":"")+(0<o("videoCall").length?"TEL-AV:"+i(o("videoCall"),r)+";":"")+(0<o("eMail").length?"EMAIL:"+i(o("eMail"),r)+";":"")+(0<o("url").length?"URL:"+i(o("url"),r)+";":"")+(0<o("memo").length?"NOTE:"+i(o("memo"),r)+";":"")+(a("birthday")&&null!==a("birthday")?"BDAY:"+a("birthday").getFullYear()+("0"+(a("birthday").getMonth()+1)).substr(-2)+("0"+a("birthday").getDate()).substr(-2)+";":"")+(0<o("street").length?"ADR:"+i(o("poBox"),r)+","+i(o("room"),r)+","+i(o("street"),r)+","+i(o("city"),r)+","+i(o("state"),r)+","+i(o("zip"),r)+","+i(o("country"),r)+";":"")+";";case this.DATA_TYPE.VEVENT:if(s("data","object"),s("data.format","string"),s("data.summary","string","number"),s("data.description","string","number"),s("data.locationName","string"),s("data.fullDay","boolean"),s("data.startDate",Date),s("data.endDate",Date),d("data.format","data.summary","data.fullDay","data.startDate","data.endDate"),Date.parse(o("startDate"))>Date.parse(o("endDate")))throw new RangeError("VEVENT.startDate must be older than VEVENT.endDate");switch(r={"\\":"\\\\",";":"\\;",",":"\\,","\n":"\\n"},t="BEGIN:VEVENT\nSUMMARY:"+i(o("summary"),r)+"\n"+(0<o("description").length?"DESCRIPTION:"+i(o("description"),r)+"\n":"")+(0<o("locationName").length?"LOCATION:"+i(o("locationName"),r)+"\n":"")+"DTSTART:"+a("startDate").getFullYear()+("0"+(a("startDate").getMonth()+1)).substr(-2)+("0"+a("startDate").getDate()).substr(-2)+(a("fullDay")?"":"T"+("0"+a("startDate").getHours()).substr(-2)+("0"+a("startDate").getMinutes()).substr(-2)+("0"+a("startDate").getSeconds()).substr(-2))+"\nDTEND:"+a("endDate").getFullYear()+("0"+(a("endDate").getMonth()+1)).substr(-2)+("0"+a("endDate").getDate()).substr(-2)+(a("fullDay")?"":"T"+("0"+a("endDate").getHours()).substr(-2)+("0"+a("endDate").getMinutes()).substr(-2)+("0"+a("endDate").getSeconds()).substr(-2))+"\nEND:VEVENT",o("format").toLowerCase()){case"icalendar":return"BEGIN:VCALENDAR\nVERSION:2.0\n"+t+"\nEND:VCALENDAR";case"zxing":return t;default:throw new Error("Unsupported VEVENT.format ("+o("format")+")")}case this.DATA_TYPE.GOOGLE_MAPS:return s("data","object"),s("data.locationName","string"),s("data.longitude","string","number"),s("data.latitude","string","number"),d("data.longitude","data.latitude"),"http://maps.google.com/maps?f=q&q="+o("latitude")+"%2C"+o("longitude")+"+%28"+encodeURIComponent(o("locationName"))+"%29";case this.DATA_TYPE.BING_MAPS:return s("data","object"),s("data.longitude","string","number"),s("data.latitude","string","number"),d("data.longitude","data.latitude"),"http://www.bing.com/maps/?v=2&cp="+o("latitude")+"~"+o("longitude")+"&lvl=16&dir=0&sty=r";case this.DATA_TYPE.GEO:return s("data","object"),s("data.longitude","string","number"),s("data.latitude","string","number"),d("data.longitude","data.latitude"),"GEO:"+o("latitude")+","+o("longitude");case this.DATA_TYPE.ITUNES:if(s("data","string","number","object"),t="object"==typeof this.data?(s("data.appId","string","number"),d("data.appId"),o("appId")):(d("data"),o()),/\d+$/.test(t))return"http://itunes.apple.com/app/id"+/\d+$/.exec(t)[0];throw new Error("Invalid ITUNES.appId. The id must be numeric");case this.DATA_TYPE.ITUNES_REVIEW:if(s("data","string","number","object"),t="object"==typeof this.data?(s("data.appId","string","number"),d("data.appId"),o("appId")):(d("data"),o()),/\d+$/.test(t))return"itms-apps://ax.itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&id="+/\d+$/.exec(t)[0];throw new Error("Invalid ITUNES.appId. The id must be numeric");case this.DATA_TYPE.ANDROID_MARKET:switch(s("data","object"),s("data.searchType","string"),s("data.linkType","string"),s("data.search","string","number"),d("data.searchType","data.linkType","data.search"),o("linkType").toLowerCase()){case"market":t="market://";break;case"website":t="http://market.android.com/";break;default:throw new Error("Unsupported ANDROID_MARKET.linkType ("+o("linkType")+")")}switch(o("searchType").toLowerCase()){case"raw":return t+"search?q="+encodeURIComponent(o("search"));case"package":return t+"search?q=pname%3A"+encodeURIComponent(o("search"));case"publisher":return t+"search?q=pub%3A"+encodeURIComponent(o("search"));case"details":return t+"details?id="+encodeURIComponent(o("search"));default:throw new Error("Unsupported ANDROID_MARKET.searchType ("+o("searchType")+")")}case this.DATA_TYPE.FACEBOOK_USER_PROFILE:if(s("data","string","number","object"),t="object"==typeof this.data?(s("data.profileId","string","number"),d("data.profileId"),o("profileId")):(d("data"),o()),/^\d{15}$/.test(t))return"fb://profile/"+t;if(/(\/profile\/|(\?|&)id=)(\d{15})(%26|&|$)/.test(t))return"fb://profile/"+/(\/profile\/|(\?|&)id=)(\d{15})(%26|&|$)/.exec(t)[3];throw new Error("Invalid FACEBOOK_USER_PROFILE.profileId. The id must be numeric, 15 characters in length");case this.DATA_TYPE.FOURSQUARE:if(s("data","string","object"),t="object"==typeof this.data?(s("data.venueId","string"),d("data.venueId"),o("venueId")):(d("data"),o()),/[a-z\d]+$/i.test(t))return"http://foursquare.com/venue/"+/[a-z\d]+$/i.exec(t)[0];throw new Error("Invalid FOURSQUARE.venueId. The id must be alphanumeric");case this.DATA_TYPE.WIKIPEDIA:return s("data","string","number","object"),t="object"==typeof this.data?(s("data.url","string","number"),d("data.url"),o("url")):(d("data"),o()),r={" ":"_"},null===(e=/\/\/([a-z\-]*)\.?wikipedia.org\/wiki\/(.*)/i.exec(t))||3!==e.length?"http://qrwp.org/"+i(t,r):"http://"+(0<e[1].length?e[1]+".":"")+"qrwp.org/"+i(e[2],r);case this.DATA_TYPE.YOUTUBE_USER:return s("data","string","object"),"http://youtube.com/user/"+(t="object"==typeof this.data?(s("data.userName","string"),d("data.userName"),o("userName")):(d("data"),o()));case this.DATA_TYPE.YOUTUBE_VIDEO:if(s("data","string","object"),t="object"==typeof this.data?(s("data.videoId","string"),d("data.videoId"),o("videoId")):(d("data"),o()),/^[-_A-Za-z\d]+$/.test(t))return"youtube://"+t;if(/(^youtube:\/\/|youtu.be\/|(\?|&)v=|\/v\/)([-_A-Za-z\d]+)(%26|&|$)/.test(t))return"youtube://"+/(^youtube:\/\/|youtu.be\/|(\?|&)v=|\/v\/)([-_A-Za-z\d]+)(%26|&|$)/.exec(t)[3];throw new Error("Invalid YOUTUBE_VIDEO.videoId. The id must be alphanumeric");case this.DATA_TYPE.TWEET_FETCH:throw new Error("DATA_TYPE.TWEET_FETCH is currently unsupported");case this.DATA_TYPE.TWEET:return s("data","string","number","object"),"object"==typeof this.data?(s("data.text","string","number"),d("data.text"),"http://twitter.com/home?status="+encodeURIComponent(o("text"))):(d("data"),"http://twitter.com/home?status="+encodeURIComponent(o()));case this.DATA_TYPE.BLACKBERRY_MESSENGER_USER:if(s("data","object"),s("data.firstName","string"),s("data.lastName","string"),s("data.bbmPin","string"),d("data.bbmPin"),/^[a-z\d]{8}$/i.test(o("bbmPin")))return"bbm:"+o("bbmPin")+"00000000"+o("firstName")+" "+o("lastName");throw new Error("Invalid BLACKBERRY_MESSENGER_USER.bbmPin. The pin must be alphanumeric, eight characters in length");case this.DATA_TYPE.ANDROID_WIFI:return s("data","object"),s("data.ssid","string"),s("data.password","string","number"),s("data.networkType","string"),d("data.ssid","data.networkType"),"WIFI:S:"+o("ssid")+";T:"+o("networkType")+(0<o("password").length?";P:"+o("password"):"")+";;";case this.DATA_TYPE.BITCOIN:if(s("data","string","object"),t="object"==typeof this.data?(s("data.hash","string"),d("data.hash"),o("hash")):(d("data"),o()),/^(bitcoin:)?[a-z\d]+$/i.test(t))return(/^bitcoin:/.test(t)?"":"bitcoin:")+t;throw new Error("Invalid BITCOIN.hash. The hash must be alphanumeric");case this.DATA_TYPE.SEPA_CREDIT_TRANSFER:if(s("data","object"),s("data.version","string","number"),s("data.bic","string"),s("data.name","string"),s("data.iban","string"),s("data.currency","string"),s("data.amount","string","number"),s("data.purpose","string"),s("data.remittanceReference","string"),s("data.remittanceText","string"),s("data.information","string"),d("data.version","data.name","data.iban"),1===(e=parseInt(o("version"),10)))d("data.bic");else if(2!==e)throw new Error("Invalid SEPA_CREDIT_TRANSFER.version. The version must be 1 or 2");if(o("bic")&&!/^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2}([A-Z0-9]{3})?$/.test(o("bic")))throw new Error("Invalid SEPA_CREDIT_TRANSFER.bic");if(70<o("name").length)throw new Error("Invalid SEPA_CREDIT_TRANSFER.name. A maximum of 70 characters is allowed");if(!/^[A-Z]{2}[0-9]{2}[A-Z0-9]{11,30}$/.test(o("iban")))throw new Error("Invalid SEPA_CREDIT_TRANSFER.iban");if(!/^[A-Z]{3}$/.test(o("currency")))throw new Error('Invalid SEPA_CREDIT_TRANSFER.currency. Use a three-character uppercase code like "EUR" or "GBP"');if((e=o("amount"))&&(!/^[0-9]+(\.[0-9]{2})?$/.test(e)||parseFloat(e)<.01||999999999.99<parseFloat(e)))throw new Error('Invalid SEPA_CREDIT_TRANSFER.amount. "." must be used as decimal separator.');if(o("purpose")&&!/^[A-Z]{4}$/.test(o("purpose")))throw new Error("Invalid SEPA_CREDIT_TRANSFER.purpose. Only four-character SEPA Purpose Codes are allowed");if(o("remittanceReference")&&o("remittanceText"))throw new Error("SEPA_CREDIT_TRANSFER.remittanceReference amd SEPA_CREDIT_TRANSFER.remittanceText cannot be used at the same time");if(25<o("remittanceReference").remittanceReference)throw new Error("Invalid SEPA_CREDIT_TRANSFER.remittanceReference. A maximum of 25 characters is allowed");if(140<o("remittanceText").remittanceText)throw new Error("Invalid SEPA_CREDIT_TRANSFER.remittanceText. A maximum of 140 characters is allowed");if(70<o("information").length)throw new Error("Invalid SEPA_CREDIT_TRANSFER.information. A maximum of 70 characters is allowed");return["BCD","00"+parseInt(o("version"),10).toString().substr(-3),"1","SCT",o("bic"),o("name"),o("iban"),o("currency")+o("amount"),o("purpose"),o("remittanceReference"),o("remittanceText"),o("information")].join("\n");default:throw new TypeError("Unsupported dataType")}function a(t){var e=n.data;if("string"==typeof t)for(var r=t.split("."),a=0;a<r.length;a++)e=e[r[a]];return e}function o(t){t=a(t);return void 0===t?"":t.toString()}function i(t,e){for(var r in e)e.hasOwnProperty(r)&&(t=t.replace(r,e[r],"g"));return t}function s(){for(var t=arguments[0].split("."),e=n,r=0;r<t.length;r++)e=e[t[r]];for(r=1;r<arguments.length;r++){if("object"==typeof e&&"function"==typeof arguments[r]&&null!==e&&e.constructor===arguments[r]||null===e&&null===arguments[r]||typeof e===arguments[r])return;"function"==typeof arguments[r]&&(arguments[r]=arguments[r].name)}throw void 0===e?new TypeError(arguments[0]+" is undefined"):new TypeError("Unexcepted type ("+typeof e+") of "+arguments[0]+" ("+[].slice.call(arguments,1).join("|")+")")}function d(){for(var t,e,r,a=0;a<arguments.length;a++){for(t=arguments[a].split("."),e=n,r=0;r<t.length;r++)e=e[t[r]];if("string"==typeof e&&0===e.length)throw new Error(arguments[a]+" cannot be empty")}}},r.prototype.ENCODE_MODE={NUMERIC:1,ALPHA_NUMERIC:2,BYTE:4,UTF8:20,UTF8_SIGNATURE:36,STRUCTURED_APPEND:3,FNC1_POS1:5,ECI:7,KANJI:8,FNC1_POS2:9},r.prototype.ERROR_CORRECTION={L:1,M:0,Q:3,H:2},r.prototype.DEFAULT=0,r.prototype.getVersion=function(t){return 0<this.version?this.version:d(h(t,this),this,!0)},r.prototype.getMinVersion=function(t){var e=new r(this.encodeMode,this.DEFAULT,this.errorCorrection);return d(h(t,e),e,!0)};var K={TOTAL_BYTES:0,REMAINDER_BITS:1,ECC_BYTES:2,EC_BLOCKS:3,ALIGNMENT_PATTERN_POSITION_OFFSET:4,VERSION_PATTERN:5},G=[null,[26,0,[10,7,17,13],[[1,0],[1,0],[1,0],[1,0]],0,null],[44,7,[16,10,28,22],[[1,0],[1,0],[1,0],[1,0]],12,null],[70,7,[26,15,44,36],[[1,0],[1,0],[2,0],[2,0]],16,null],[100,7,[36,20,64,52],[[2,0],[1,0],[4,0],[2,0]],20,null],[134,7,[48,26,88,72],[[2,0],[1,0],[2,2],[2,2]],24,null],[172,7,[64,36,112,96],[[4,0],[2,0],[4,0],[4,0]],28,null],[196,0,[72,40,130,108],[[4,0],[2,0],[4,1],[2,4]],16,31892],[242,0,[88,48,156,132],[[2,2],[2,0],[4,2],[4,2]],18,34236],[292,0,[110,60,192,160],[[3,2],[2,0],[4,4],[4,4]],20,39577],[346,0,[130,72,224,192],[[4,1],[2,2],[6,2],[6,2]],22,42195],[404,0,[150,80,264,224],[[1,4],[4,0],[3,8],[4,4]],24,48118],[466,0,[176,96,308,260],[[6,2],[2,2],[7,4],[4,6]],26,51042],[532,0,[198,104,352,288],[[8,1],[4,0],[12,4],[8,4]],28,55367],[581,3,[216,120,384,320],[[4,5],[3,1],[11,5],[11,5]],20,58893],[655,3,[240,132,432,360],[[5,5],[5,1],[11,7],[5,7]],22,63784],[733,3,[280,144,480,408],[[7,3],[5,1],[3,13],[15,2]],24,68472],[815,3,[308,168,532,448],[[10,1],[1,5],[2,17],[1,15]],24,70749],[901,3,[338,180,588,504],[[9,4],[5,1],[2,19],[17,1]],26,76311],[991,3,[364,196,650,546],[[3,11],[3,4],[9,16],[17,4]],28,79154],[1085,3,[416,224,700,600],[[3,13],[3,5],[15,10],[15,5]],28,84390],[1156,4,[442,224,750,644],[[17,0],[4,4],[19,6],[17,6]],22,87683],[1258,4,[476,252,816,690],[[17,0],[2,7],[34,0],[7,16]],24,92361],[1364,4,[504,270,900,750],[[4,14],[4,5],[16,14],[11,14]],24,96236],[1474,4,[560,300,960,810],[[6,14],[6,4],[30,2],[11,16]],26,102084],[1588,4,[588,312,1050,870],[[8,13],[8,4],[22,13],[7,22]],26,102881],[1706,4,[644,336,1110,952],[[19,4],[10,2],[33,4],[28,6]],28,110507],[1828,4,[700,360,1200,1020],[[22,3],[8,4],[12,28],[8,26]],28,110734],[1921,3,[728,390,1260,1050],[[3,23],[3,10],[11,31],[4,31]],24,117786],[2051,3,[784,420,1350,1140],[[21,7],[7,7],[19,26],[1,37]],24,119615],[2185,3,[812,450,1440,1200],[[19,10],[5,10],[23,25],[15,25]],26,126325],[2323,3,[868,480,1530,1290],[[2,29],[13,3],[23,28],[42,1]],26,127568],[2465,3,[924,510,1620,1350],[[10,23],[17,0],[19,35],[10,35]],26,133589],[2611,3,[980,540,1710,1440],[[14,21],[17,1],[11,46],[29,19]],28,136944],[2761,3,[1036,570,1800,1530],[[14,23],[13,6],[59,1],[44,7]],28,141498],[2876,0,[1064,570,1890,1590],[[12,26],[12,7],[22,41],[39,14]],24,145311],[3034,0,[1120,600,1980,1680],[[6,34],[6,14],[2,64],[46,10]],26,150283],[3196,0,[1204,630,2100,1770],[[29,14],[17,4],[24,46],[49,10]],26,152622],[3362,0,[1260,660,2220,1860],[[13,32],[4,18],[42,32],[48,14]],26,158308],[3532,0,[1316,720,2310,1950],[[40,7],[20,4],[10,67],[43,22]],28,161089],[3706,0,[1372,750,2430,2040],[[18,31],[19,6],[20,61],[34,34]],28,167017]],z=[[21522,20773,24188,23371,17913,16590,20375,19104],[30660,29427,32170,30877,26159,25368,27713,26998],[5769,5054,7399,6608,1890,597,3340,2107],[13663,12392,16177,14854,9396,8579,11994,11245]],W=[[1,1,1,1,1,1,1],[1,0,0,0,0,0,1],[1,0,1,1,1,0,1],[1,0,1,1,1,0,1],[1,0,1,1,1,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]],$=[[1,1,1,1,1],[1,0,0,0,1],[1,0,1,0,1],[1,0,0,0,1],[1,1,1,1,1]],H=[function(t,e){return(e+t)%2==0},function(t,e){return e%2==0},function(t,e){return t%3==0},function(t,e){return(e+t)%3==0},function(t,e){return(Math.floor(e/2)+Math.floor(t/3))%2==0},function(t,e){return e*t%2+e*t%3==0},function(t,e){return(e*t%2+e*t%3)%2==0},function(t,e){return(e*t%3+(e+t)%2)%2==0}],Z={FINDER:2,SEPARATOR:4,TIMING:8,ALIGNMENT:16,VERSION:32,FORMAT:64,DATA:128};function d(t,e,r){var a,n,o=e.version,i=e.errorCorrection,s=new Array(8*G[G.length-1][K.TOTAL_BYTES]),d=0;switch(e.encodeMode){case e.ENCODE_MODE.NUMERIC:for(var h=0,u=0;u<t.length;u++){if(!(48<=t[u]&&t[u]<=57))throw new TypeError("Invalid data format");h=10*h+(t[u]-48),u%3==2&&(d=tt(s,d,Q(h,10)),h=0)}switch(u%3){case 1:d=tt(s,d,Q(h,4));break;case 2:d=tt(s,d,Q(h,7))}if(0<o)1<=o&&o<=9?a=10:10<=o&&o<=26?a=12:27<=o&&o<=40&&(a=14);else{if(!(0<(n=q(d+4+10,i))))throw new RangeError("Too much data");if(1<=(n=n<Math.abs(o)?Math.abs(o):n)&&n<=9)a=10;else{if(!(0<(n=q(d+4+12,i))))throw new RangeError("Too much data");if(10<=(n=n<Math.abs(o)?Math.abs(o):n)&&n<=26)a=12;else{if(!(0<(n=q(d+4+14,i))))throw new RangeError("Too much data");if(!(27<=(n=n<Math.abs(o)?Math.abs(o):n)&&n<=40))throw new RangeError("Bug in version detection");a=14}}o=n}break;case e.ENCODE_MODE.ALPHA_NUMERIC:var c,E,l=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,32,36,37,42,43,45,46,47,58];for(u=0;u<t.length-1;u+=2){if(c=rt(96==(96&t[u])?95&t[u]:t[u],l),E=rt(96==(96&t[u+1])?95&t[u+1]:t[u+1],l),-1===c||-1===E)throw new Error("Character not supported in ALPHA_NUMERIC encoding mode");d=tt(s,d,Q(45*c+E,11))}if(u===t.length-1){if(-1===(c=rt(96==(96&t[u])?95&t[u]:t[u],l)))throw new Error("Character not supported in ALPHA_NUMERIC encoding mode");d=tt(s,d,Q(c,6))}if(0<o)1<=o&&o<=9?a=9:10<=o&&o<=26?a=11:27<=o&&o<=40&&(a=13);else{if(!(0<(n=q(d+4+9,i))))throw new RangeError("Too much data");if(1<=(n=n<Math.abs(o)?Math.abs(o):n)&&n<=9)a=9;else{if(!(0<(n=q(d+4+11,i))))throw new RangeError("Too much data");if(10<=(n=n<Math.abs(o)?Math.abs(o):n)&&n<=26)a=11;else{if(!(0<(n=q(d+4+13,i))))throw new RangeError("Too much data");if(!(27<=(n=n<Math.abs(o)?Math.abs(o):n)&&n<=40))throw new RangeError("Bug in version detection");a=13}}o=n}break;case e.ENCODE_MODE.BYTE:case e.ENCODE_MODE.UTF8:case e.ENCODE_MODE.UTF8_SIGNATURE:for(u=0;u<t.length;u++)d=tt(s,d,Q(t[u],8));if(0<o)0<=o&&o<=9?a=8:10<=o&&o<=40&&(a=16);else{if(!(0<(n=q(d+4+8,i))))throw new RangeError("Too much data");if(1<=(n=n<Math.abs(o)?Math.abs(o):n)&&n<=9)a=8;else{if(!(0<(n=q(d+4+16,i))))throw new RangeError("Too much data");if(!(10<=(n=n<Math.abs(o)?Math.abs(o):n)&&n<=40))throw new RangeError("Bug in version detection");a=16}o=n}break;case e.ENCODE_MODE.KANJI:throw new Error('Encoding mode "KANJI" not supported yet');default:throw new Error("Unsupported encoding mode")}if(r)return o;s=Q(15&e.encodeMode,4).concat(Q(t.length,a)).concat(s),r=G[o][K.TOTAL_BYTES]-G[o][K.ECC_BYTES][i]<<3;if(r<(d+=4+a))throw new RangeError("Too much data for the selected version");e=r-d,d=tt(s,d,X(e=4<e?4:e,0));for(m=r-(d=tt(s,d,X((8-d%8)%8,u=0)))>>>3;u<m;u++)d=tt(s,d,1&u?[0,0,0,1,0,0,0,1]:[1,1,1,0,1,1,0,0]);for(var p=Math.floor((G[o][K.TOTAL_BYTES]-G[o][K.ECC_BYTES][i])/(G[o][K.EC_BLOCKS][i][0]+G[o][K.EC_BLOCKS][i][1])),f=Math.floor(G[o][K.ECC_BYTES][i]/(G[o][K.EC_BLOCKS][i][0]+G[o][K.EC_BLOCKS][i][1])),g=[],T=[],m=G[o][K.EC_BLOCKS][i][u=0];u<m;u++){for(T=[],w=0;w<p;w++)T.push(J(s.splice(0,8)));g.push(T)}for(u=0,m=G[o][K.EC_BLOCKS][i][1];u<m;u++){for(T=[],w=0;w<=p;w++)T.push(J(s.splice(0,8)));g.push(T)}var b=[],A=[],w=1;for(u=0;u<255;u++)b.push(w),A[w]=u,255<(w<<=1)&&(w^=285);var R=[1];for(u=0,m=f;u<m;u++){for(R[u+1]=1,w=u;0<w;w--)R[w]=0<R[w]?R[w-1]^b[(A[R[w]]+u)%255]:R[w-1];R[0]=b[(A[R[0]]+u)%255]}var y=[];for(u=R.length-1;0<=u;u--)y.push(R[u]);var F,I=[];for(w=0;w<g.length;w++)for(I[w]=[].concat(g[w]).concat(X(f,0));I[w].length>=y.length;){for(F=I[w][0],u=0;u<y.length;u++)I[w][u]^=b[(A[y[u]]+A[F])%255];if(0!==I[w].shift())throw new Error("Bug while generating the ECC")}for(s=new Array(8*G[G.length-1][K.TOTAL_BYTES]),u=d=0;u<=p;u++)for(w=0;w<g.length;w++)u<g[w].length&&(d=tt(s,d,Q(g[w][u],8)));for(u=0;u<f;u++)for(w=0;w<I.length;w++)u<I[w].length&&(d=tt(s,d,Q(I[w][u],8)));var N=17+(o<<2),D=new Array(N);for(u=0;u<N;u++)D[u]=X(N,0);for(et(D,0,0,W,Z.FINDER),et(D,0,N-7,W,Z.FINDER),et(D,N-7,0,W,Z.FINDER),u=0;u<8;u++)D[u][7]=Z.SEPARATOR,D[7][u]=Z.SEPARATOR,D[u][N-8]=Z.SEPARATOR,D[7][N-1-u]=Z.SEPARATOR,D[N-1-u][7]=Z.SEPARATOR,D[N-8][u]=Z.SEPARATOR;for(u=8;u<N-8;u++)D[u][6]=Z.TIMING|(u+1)%2,D[6][u]=Z.TIMING|(u+1)%2;if(1<o)for(var k=G[o][K.ALIGNMENT_PATTERN_POSITION_OFFSET],j=4*o+10,O=j;;){for(v=j;;){if(6===v&&6===O||6===v&&O===N-7||v===N-7&&6===O||et(D,v-2,O-2,$,Z.ALIGNMENT),6===v)break;(v-=k)<18&&(v=6)}if(6===O)break;(O-=k)<18&&(O=6)}if(7<=o){var _=G[o][K.VERSION_PATTERN];for(u=0;u<6;u++)for(w=0;w<3;w++)D[N-11+w][u]=Z.VERSION|1&_,D[u][N-11+w]=Z.VERSION|1&_,_>>=1}for(u=0;u<8;u++)D[N-1-u][8]=0|Z.FORMAT,D[8][N-1-u]=0|Z.FORMAT,6!==u&&(D[8][u]=0|Z.FORMAT,D[u][8]=0|Z.FORMAT);D[8][8]=0|Z.FORMAT,D[N-8][8]=1|Z.FORMAT;var C=-1,v=O=N-1;for(u=0;u<d;u++){D[O][v]=Z.DATA|s[u];do{if(6<v&&0==(1&v)||v<6&&1==(1&v))v--;else if(-1===C&&0===O||1===C&&O===N-1){if(0===v){if(u<d-1)throw new RangeError("Too much data while writing the symbol");break}C=-C,6===--v&&v--}else O+=C,v++}while(0!==D[O][v])}var S,M=[];for(u=0;u<H.length;u++){for(M[u]=[],O=0;O<N;O++)for(M[u][O]=[],v=0;v<N;v++)D[O][v]&Z.DATA?M[u][O][v]=1&(D[O][v]^H[u](v,O)):M[u][O][v]=1&D[O][v];S=Q(z[i][u],15),M[u][N-1][8]=M[u][8][0]=S[0],M[u][N-2][8]=M[u][8][1]=S[1],M[u][N-3][8]=M[u][8][2]=S[2],M[u][N-4][8]=M[u][8][3]=S[3],M[u][N-5][8]=M[u][8][4]=S[4],M[u][N-6][8]=M[u][8][5]=S[5],M[u][N-7][8]=M[u][8][7]=S[6],M[u][8][N-8]=M[u][8][8]=S[7],M[u][8][N-7]=M[u][7][8]=S[8],M[u][8][N-6]=M[u][5][8]=S[9],M[u][8][N-5]=M[u][4][8]=S[10],M[u][8][N-4]=M[u][3][8]=S[11],M[u][8][N-3]=M[u][2][8]=S[12],M[u][8][N-2]=M[u][1][8]=S[13],M[u][8][N-1]=M[u][0][8]=S[14]}var P,Y,U,L,B,x=0,V=4294967295;for(u=0;u<H.length;u++){for(O=P=Y=U=L=0;O<N;O++)for(v=0;v<N;v++)6<=v&&(1==(M[u][O][v-6]&M[u][O][v-5]&M[u][O][v-4]&M[u][O][v-3]&M[u][O][v-2]&M[u][O][v-1]&M[u][O][v])||0==(M[u][O][v-6]|M[u][O][v-5]|M[u][O][v-4]|M[u][O][v-3]|M[u][O][v-2]|M[u][O][v-1]|M[u][O][v]))&&P++,6<=O&&(1==(M[u][O-6][v]&M[u][O-5][v]&M[u][O-4][v]&M[u][O-3][v]&M[u][O-2][v]&M[u][O-1][v]&M[u][O][v])||0==(M[u][O-6][v]|M[u][O-5][v]|M[u][O-4][v]|M[u][O-3][v]|M[u][O-2][v]|M[u][O-1][v]|M[u][O][v]))&&P++,0<v&&0<O&&(1==(M[u][O][v]&M[u][O][v-1]&M[u][O-1][v]&M[u][O-1][v-1])||0==(M[u][O][v]|M[u][O][v-1]|M[u][O-1][v]|M[u][O-1][v-1]))&&Y++,6<=v&&1===M[u][O][v-6]&&0===M[u][O][v-5]&&1===M[u][O][v-4]&&1===M[u][O][v-3]&&1===M[u][O][v-2]&&0===M[u][O][v-1]&&1===M[u][O][v]&&U++,6<=O&&1===M[u][O-6][v]&&0===M[u][O-5][v]&&1===M[u][O-4][v]&&1===M[u][O-3][v]&&1===M[u][O-2][v]&&0===M[u][O-1][v]&&1===M[u][O][v]&&U++,L+=M[u][O][v];(B=3*P+3*Y+40*U+10*(L=Math.abs(100*L/(N*N)-50)/5))<V&&(V=B,x=u)}for(O=0;O<N;O++)for(v=0;v<N;v++)D[O][v]&(Z.DATA|Z.FORMAT)?D[O][v]=M[x][O][v]:D[O][v]=1&D[O][v];return D}function h(t,e){var r,a,n,o,i;switch(typeof t){case"string":r=t;break;case"number":r=t.toString();break;case"object":if(t.constructor===s[u].prototype.Input)r=t.toString();else{if((Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)})(t))return t;r=new s[u].prototype.Input(t.dataType,t.data).toString()}break;default:throw new TypeError("Unsupported input parameter")}if(a=e.encodeMode===e.ENCODE_MODE.UTF8_SIGNATURE?[239,187,191]:[],e.encodeMode===e.ENCODE_MODE.UTF8_SIGNATURE||e.encodeMode===e.ENCODE_MODE.UTF8)for(n=0,i=r.length;n<i;n++)(o=r.charCodeAt(n))<128?a.push(o):127<o&&o<2048?a.push(o>>6|192,63&o|128):a.push(o>>12|224,o>>6&63|128,63&o|128);else for(n=0,i=r.length;n<i;n++)a.push(r.charCodeAt(n));return a}function q(t,e){for(var r=1;r<G.length;r++)if(t<=G[r][K.TOTAL_BYTES]-G[r][K.ECC_BYTES][e]<<3)return r;return 0}function Q(t,e){var r=new Array(e);if("number"==typeof t&&0<e&&e<=32){for(var a=e-1;0<=a;a--)r[a]=1&t,t>>=1;return r}throw new Error("Invalid parameters in toBits().")}function J(t,e){return((t[e=e||0]||0)<<7)+((t[e+1]||0)<<6)+((t[e+2]||0)<<5)+((t[e+3]||0)<<4)+((t[e+4]||0)<<3)+((t[e+5]||0)<<2)+((t[e+6]||0)<<1)+(t[e+7]||0)}function X(t,e){for(var r=new Array(t),a=0;a<t;a++)r[a]=e;return r}function tt(t,e,r){for(var a=0;a<r.length;a++)t[e+a]=r[a];return e+r.length}function et(t,e,r,a,n){for(var o,i,s=0,d=a.length;s<d;s++)for(o=0,i=a[s].length;o<i;o++)t[r+s][e+o]=a[s][o]^n}function rt(t,e){if("function"==typeof e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1}function n(t,e){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e)return 1}var u="JSQR";s[u]=function(){},s[u].prototype.encode=function(t,e){return new s[u].prototype.Matrix(t,e)},s[u].prototype.Input=t,s[u].prototype.DATA_TYPE=s[u].prototype.Input.prototype.DATA_TYPE,s[u].prototype.Code=r,s[u].prototype.ENCODE_MODE=s[u].prototype.Code.prototype.ENCODE_MODE,s[u].prototype.ERROR_CORRECTION=s[u].prototype.Code.prototype.ERROR_CORRECTION,s[u].prototype.DEFAULT=s[u].prototype.Code.prototype.DEFAULT,s[u].prototype.Matrix=function(t,e){for(var r=this,u=d(h(t,e),e),a=0;a<u.length;a++)this[a]=u[a];try{Object.defineProperty(this,"scale",{configurable:!1,writeable:!0,get:function(){return n},set:function(t){if("number"!=typeof t)throw new TypeError("Invalid scale type");if(t<=0||256<t)throw new RangeError("Scale value out of range");n=t}});var n=4}catch(t){this.scale=4}try{Object.defineProperty(this,"margin",{configurable:!1,writeable:!0,get:function(){return o},set:function(t){if("number"!=typeof t)throw new TypeError("Invalid margin type");if(t<0||256<t)throw new RangeError("Margin value out of range");o=t}});var o=4}catch(t){this.margin=4}try{Object.defineProperty(this,"color1",{configurable:!1,writeable:!0,get:function(){return i},set:function(t){if("string"!=typeof t)throw new TypeError("Invalid color1 type");i=t}});var i="rgb(0,0,0)"}catch(t){this.color1="rgb(0,0,0)"}try{Object.defineProperty(this,"color0",{configurable:!1,writeable:!0,get:function(){return s},set:function(t){if("string"!=typeof t)throw new TypeError("Invalid color2 type");s=t}});var s="none"}catch(t){this.color0="none"}try{Object.defineProperty(this,"length",{configurable:!1,writeable:!1,get:function(){return u.length}})}catch(t){this.length=new function(){this.toString=function(){return u.length}}}try{Object.defineProperty(this,"width",{configurable:!1,writeable:!1,get:function(){return u.length+(r.margin<<1)}})}catch(t){this.width=new function(){this.toString=function(){return u.length+(r.margin<<1)}}}try{Object.defineProperty(this,"pixelWidth",{configurable:!1,writeable:!1,get:function(){return(u.length+(r.margin<<1))*r.scale}})}catch(t){this.pixelWidth=new function(){this.toString=function(){return(u.length+(r.margin<<1))*r.scale}}}this.draw=function(t,e,r){for(var a,n=t.getContext("2d"),o=this.scale,i=this.margin,s=0;s<u.length;s++)for(a=0;a<u[s].length;a++)u[s][a]&&n.fillRect(e+(a+i)*o,r+(s+i)*o,o,o)},this.drawHTML=function(t,e,r){e=e||"div";for(var a,n,o=this.scale,i=this.margin,s=this.color1,d='<div style="position:relative; background:'+this.color2+'">',h=0;h<u.length;h++)for(a=0;a<u.length;a+=n)if((n=1)===u[h][a]){for(;a+n<u.length&&1===u[h][a+n];)n++;d+=r?"<"+e+' style="width:'+n*o+"px; height:"+o+"px; left:"+(a+i)*o+"px; top:"+(h+i)*o+'px;"></'+e+">":"<"+e+' style="position:absolute; width:'+n*o+"px; height:"+o+"px; left:"+(a+i)*o+"px; top:"+(h+i)*o+"px; background:"+s+';"></'+e+">"}return d+=NaN,t&&void 0!==t.innerHTML&&(t.innerHTML=d),d},this.toDataURL=function(){},this.toSVG=function(){},this.toArray=function(){for(var t,e=X(u.length+(o<<1),0),r=0;r<u.length;r++)for(e[r+o]=X(u[r].length+(o<<1),0),t=0;t<u[r].length;t++)e[r+o][t+o]=u[r][t];return e},this.toString=function(){return this.toArray().toString()}}})(window);
//# sourceMappingURL=jsqr-1.0.3-min.js.map
